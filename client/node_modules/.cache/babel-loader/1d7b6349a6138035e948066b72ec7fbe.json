{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\recipe_app\\\\client\\\\src\\\\components\\\\Main\\\\main.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport styles from \"./styles.module.css\";\nimport Header from \"../Header/Header\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"pork\");\n  const [recipes] = useState([]);\n  const [favorites, setFavorites] = useState([]);\n  useEffect(() => {\n    // Fetch categories when the component mounts\n    const fetchCategories = async () => {\n      const res = await axios.get(\"https://www.themealdb.com/api/json/v1/1/categories.php\");\n      setCategories(res.data.categories);\n    };\n\n    fetchCategories();\n  }, []);\n  useEffect(() => {\n    // Fetch recipes based on the selected category\n    const fetchRecipes = async () => {\n      const res = await axios.get(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${selectedCategory}`);\n      setCategories(res.data.categories.slice(0, 5)); // Get only the first 5 categories\n    };\n\n    if (selectedCategory) fetchRecipes();\n  }, [selectedCategory]);\n\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const handleAddToFavorites = async recipe => {\n    const userId = localStorage.getItem(\"userId\"); // Assuming user ID is stored in localStorage\n\n    if (userId) {\n      try {\n        await axios.post(\"http://localhost:5000/api/favorites\", {\n          userId: userId,\n          recipeId: recipe.idMeal // The ID of the recipe being added to favorites\n\n        }); // Optionally, you can still update local state\n\n        setFavorites([...favorites, recipe]);\n        localStorage.setItem(\"favorites\", JSON.stringify([...favorites, recipe]));\n      } catch (error) {\n        console.error(\"Error adding to favorites\", error);\n      }\n    } else {\n      alert(\"Please log in to add favorites.\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main_container,\n      children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n        className: styles.navbar,\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Recipe App\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 5\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.category_buttons,\n        children: categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: selectedCategory === category.strCategory ? styles.active_category : styles.category_btn,\n          onClick: () => setSelectedCategory(category.strCategory),\n          children: category.strCategory\n        }, category.idCategory, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 6\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 4\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.recipe_grid,\n        children: recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.recipe_card,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: recipe.strMealThumb,\n            alt: recipe.strMeal,\n            className: styles.recipe_img\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: recipe.strMeal\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleAddToFavorites(recipe),\n            children: \"Add to Favorites\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 7\n          }, this)]\n        }, recipe.idMeal, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 6\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Main, \"Q68xrjClVeO3ndEMOcmzKwujNTk=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["D:/Projects/recipe_app/client/src/components/Main/main.jsx"],"names":["useState","useEffect","axios","styles","Header","Main","categories","setCategories","selectedCategory","setSelectedCategory","recipes","favorites","setFavorites","fetchCategories","res","get","data","fetchRecipes","slice","handleLogout","localStorage","removeItem","window","location","reload","handleAddToFavorites","recipe","userId","getItem","post","recipeId","idMeal","setItem","JSON","stringify","error","console","alert","main_container","navbar","category_buttons","map","category","strCategory","active_category","category_btn","idCategory","recipe_grid","recipe_card","strMealThumb","strMeal","recipe_img"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport styles from \"./styles.module.css\";\r\nimport Header from \"../Header/Header\";\r\n\r\nconst Main = () => {\r\n\tconst [categories, setCategories] = useState([]);\r\n\tconst [selectedCategory, setSelectedCategory] = useState(\"pork\");\r\n\tconst [recipes] = useState([]);\r\n\tconst [favorites, setFavorites] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Fetch categories when the component mounts\r\n\t\tconst fetchCategories = async () => {\r\n\t\t\tconst res = await axios.get(\r\n\t\t\t\t\"https://www.themealdb.com/api/json/v1/1/categories.php\"\r\n\t\t\t);\r\n\t\t\tsetCategories(res.data.categories);\r\n\t\t};\r\n\r\n\t\tfetchCategories();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\t// Fetch recipes based on the selected category\r\n\t\tconst fetchRecipes = async () => {\r\n\t\t\tconst res = await axios.get(\r\n\t\t\t\t`https://www.themealdb.com/api/json/v1/1/filter.php?c=${selectedCategory}`\r\n\t\t\t);\r\n\t\t\tsetCategories(res.data.categories.slice(0, 5)); // Get only the first 5 categories\r\n\t\t};\r\n\r\n\t\tif (selectedCategory) fetchRecipes();\r\n\t}, [selectedCategory]);\r\n\r\n\tconst handleLogout = () => {\r\n\t\tlocalStorage.removeItem(\"token\");\r\n\t\twindow.location.reload();\r\n\t};\r\n\r\n\tconst handleAddToFavorites = async (recipe) => {\r\n\t\tconst userId = localStorage.getItem(\"userId\"); // Assuming user ID is stored in localStorage\r\n\r\n\t\tif (userId) {\r\n\t\t\ttry {\r\n\t\t\t\tawait axios.post(\"http://localhost:5000/api/favorites\", {\r\n\t\t\t\t\tuserId: userId,\r\n\t\t\t\t\trecipeId: recipe.idMeal, // The ID of the recipe being added to favorites\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Optionally, you can still update local state\r\n\t\t\t\tsetFavorites([...favorites, recipe]);\r\n\t\t\t\tlocalStorage.setItem(\"favorites\", JSON.stringify([...favorites, recipe]));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error adding to favorites\", error);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\talert(\"Please log in to add favorites.\");\r\n\t\t}\r\n\t};\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t<Header/>\r\n\r\n\t\t<div className={styles.main_container}>\r\n\t\t\t<nav className={styles.navbar}>\r\n\t\t\t\t<h1>Recipe App</h1>\r\n\t\t\t</nav>\r\n\r\n\t\t\t<div className={styles.category_buttons}>\r\n\t\t\t\t{categories.map((category) => (\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tkey={category.idCategory}\r\n\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\tselectedCategory === category.strCategory\r\n\t\t\t\t\t\t\t\t? styles.active_category\r\n\t\t\t\t\t\t\t\t: styles.category_btn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tonClick={() => setSelectedCategory(category.strCategory)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{category.strCategory}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className={styles.recipe_grid}>\r\n\t\t\t\t{recipes.map((recipe) => (\r\n\t\t\t\t\t<div key={recipe.idMeal} className={styles.recipe_card}>\r\n\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\tsrc={recipe.strMealThumb}\r\n\t\t\t\t\t\t\talt={recipe.strMeal}\r\n\t\t\t\t\t\t\tclassName={styles.recipe_img}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<h3>{recipe.strMeal}</h3>\r\n\t\t\t\t\t\t<button onClick={() => handleAddToFavorites(recipe)}>\r\n\t\t\t\t\t\t\tAdd to Favorites\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}