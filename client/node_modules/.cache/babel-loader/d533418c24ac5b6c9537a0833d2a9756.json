{"ast":null,"code":"var _jsxFileName = \"D:\\\\Projects\\\\recipe_app\\\\client\\\\src\\\\components\\\\Main\\\\main.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport styles from \"./styles.module.css\";\nimport Header from \"../Header/Header\";\nimport { API_BASE_URL } from \"../config\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Main = () => {\n  _s();\n\n  const [categories, setCategories] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(\"pork\");\n  const [recipes, setRecipes] = useState([]);\n  const [favoritedRecipes, setFavoritedRecipes] = useState(new Set());\n  const [user] = useState(JSON.parse(localStorage.getItem(\"user\") || \"{}\")); // Fetch categories when the component mounts\n\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const res = await axios.get(\"https://www.themealdb.com/api/json/v1/1/categories.php\");\n        setCategories(res.data.categories.slice(0, 5));\n      } catch (error) {\n        console.error(\"Error fetching categories:\", error);\n      }\n    };\n\n    fetchCategories();\n  }, []); // Fetch recipes based on the selected category\n\n  useEffect(() => {\n    const fetchRecipes = async () => {\n      try {\n        const res = await axios.get(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${selectedCategory}`);\n        setRecipes(res.data.meals);\n      } catch (error) {\n        console.error(\"Error fetching recipes:\", error);\n      }\n    };\n\n    if (selectedCategory) fetchRecipes();\n  }, [selectedCategory]); // Function to add a recipe to favorites\n\n  const handleAddToFavorites = async recipe => {\n    if (!user._id) {\n      alert(\"Please log in to add favorites.\");\n      return;\n    }\n\n    try {\n      await axios.post(`${API_BASE_URL}/api/favorites`, {\n        userId: user._id,\n        recipeId: recipe.idMeal\n      }); // Update local state and local storage for favorites\n\n      const updatedFavorites = new Set(favoritedRecipes);\n\n      if (updatedFavorites.has(recipe.idMeal)) {\n        updatedFavorites.delete(recipe.idMeal); // Remove from favorites\n      } else {\n        updatedFavorites.add(recipe.idMeal); // Add to favorites\n      }\n\n      setFavoritedRecipes(updatedFavorites);\n    } catch (error) {\n      console.error(\"Error adding to favorites:\", error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.main_container,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.category_buttons,\n        children: categories.map(category => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: selectedCategory === category.strCategory ? styles.active_category : styles.category_btn,\n          onClick: () => setSelectedCategory(category.strCategory),\n          children: category.strCategory\n        }, category.idCategory, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 7\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.recipe_grid,\n        children: recipes.map(recipe => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.recipe_card,\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: recipe.strMealThumb,\n            alt: recipe.strMeal,\n            className: styles.recipe_img\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [recipe.strMeal, /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAddToFavorites(recipe),\n              className: `${styles.favorite_btn} ${favoritedRecipes.has(recipe.idMeal) ? styles.favorited : \"\"}`,\n              children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                width: \"18\",\n                height: \"18\",\n                fill: favoritedRecipes.has(recipe.idMeal) ? \"pink\" : \"none\",\n                stroke: favoritedRecipes.has(recipe.idMeal) ? \"pink\" : \"black\",\n                className: \"bi bi-heart\",\n                viewBox: \"0 0 16 16\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 15s-7-4.35-7-9.36C1 2.66 3.58 0 8 0c4.42 0 7 2.66 7 5.64C15 10.65 8 15 8 15z\",\n                  strokeWidth: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 9\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 8\n          }, this)]\n        }, recipe.idMeal, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 7\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Main, \"5oz75/tfrftcpm+bAsHZZRSsb8I=\");\n\n_c = Main;\nexport default Main;\n\nvar _c;\n\n$RefreshReg$(_c, \"Main\");","map":{"version":3,"sources":["D:/Projects/recipe_app/client/src/components/Main/main.jsx"],"names":["useState","useEffect","axios","styles","Header","API_BASE_URL","Main","categories","setCategories","selectedCategory","setSelectedCategory","recipes","setRecipes","favoritedRecipes","setFavoritedRecipes","Set","user","JSON","parse","localStorage","getItem","fetchCategories","res","get","data","slice","error","console","fetchRecipes","meals","handleAddToFavorites","recipe","_id","alert","post","userId","recipeId","idMeal","updatedFavorites","has","delete","add","main_container","category_buttons","map","category","strCategory","active_category","category_btn","idCategory","recipe_grid","recipe_card","strMealThumb","strMeal","recipe_img","favorite_btn","favorited"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport styles from \"./styles.module.css\";\r\nimport Header from \"../Header/Header\";\r\nimport { API_BASE_URL } from \"../config\";\r\n\r\nconst Main = () => {\r\n\tconst [categories, setCategories] = useState([]);\r\n\tconst [selectedCategory, setSelectedCategory] = useState(\"pork\");\r\n\tconst [recipes, setRecipes] = useState([]);\r\n\tconst [favoritedRecipes, setFavoritedRecipes] = useState(new Set());\r\n\tconst [user] = useState(JSON.parse(localStorage.getItem(\"user\") || \"{}\"));\r\n\r\n\t// Fetch categories when the component mounts\r\n\tuseEffect(() => {\r\n\t\tconst fetchCategories = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\t\"https://www.themealdb.com/api/json/v1/1/categories.php\"\r\n\t\t\t\t);\r\n\t\t\t\tsetCategories(res.data.categories.slice(0, 5));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error fetching categories:\", error);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchCategories();\r\n\t}, []);\r\n\r\n\t// Fetch recipes based on the selected category\r\n\tuseEffect(() => {\r\n\t\tconst fetchRecipes = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\t`https://www.themealdb.com/api/json/v1/1/filter.php?c=${selectedCategory}`\r\n\t\t\t\t);\r\n\t\t\t\tsetRecipes(res.data.meals);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error fetching recipes:\", error);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (selectedCategory) fetchRecipes();\r\n\t}, [selectedCategory]);\r\n\r\n\t// Function to add a recipe to favorites\r\n\tconst handleAddToFavorites = async (recipe) => {\r\n\t\tif (!user._id) {\r\n\t\t\talert(\"Please log in to add favorites.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait axios.post(`${API_BASE_URL}/api/favorites`, {\r\n\t\t\t\tuserId: user._id,\r\n\t\t\t\trecipeId: recipe.idMeal,\r\n\t\t\t});\r\n\r\n\t\t\t// Update local state and local storage for favorites\r\n\t\t\tconst updatedFavorites = new Set(favoritedRecipes);\r\n\t\t\tif (updatedFavorites.has(recipe.idMeal)) {\r\n\t\t\t\tupdatedFavorites.delete(recipe.idMeal); // Remove from favorites\r\n\t\t\t} else {\r\n\t\t\t\tupdatedFavorites.add(recipe.idMeal); // Add to favorites\r\n\t\t\t}\r\n\t\t\tsetFavoritedRecipes(updatedFavorites);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error adding to favorites:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Header />\r\n\r\n\t\t\t<div className={styles.main_container}>\r\n\t\t\t\t<div className={styles.category_buttons}>\r\n\t\t\t\t\t{categories.map((category) => (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tkey={category.idCategory}\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\tselectedCategory === category.strCategory\r\n\t\t\t\t\t\t\t\t\t? styles.active_category\r\n\t\t\t\t\t\t\t\t\t: styles.category_btn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={() => setSelectedCategory(category.strCategory)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{category.strCategory}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={styles.recipe_grid}>\r\n\t\t\t\t\t{recipes.map((recipe) => (\r\n\t\t\t\t\t\t<div key={recipe.idMeal} className={styles.recipe_card}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={recipe.strMealThumb}\r\n\t\t\t\t\t\t\t\talt={recipe.strMeal}\r\n\t\t\t\t\t\t\t\tclassName={styles.recipe_img}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{recipe.strMeal}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => handleAddToFavorites(recipe)}\r\n\t\t\t\t\t\t\t\t\tclassName={`${styles.favorite_btn} ${\r\n\t\t\t\t\t\t\t\t\t\tfavoritedRecipes.has(recipe.idMeal) ? styles.favorited : \"\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{/* Heart Icon */}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"18\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"18\"\r\n\t\t\t\t\t\t\t\t\t\tfill={favoritedRecipes.has(recipe.idMeal) ? \"pink\" : \"none\"}\r\n\t\t\t\t\t\t\t\t\t\tstroke={favoritedRecipes.has(recipe.idMeal) ? \"pink\" : \"black\"}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"bi bi-heart\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M8 15s-7-4.35-7-9.36C1 2.66 3.58 0 8 0c4.42 0 7 2.66 7 5.64C15 10.65 8 15 8 15z\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}