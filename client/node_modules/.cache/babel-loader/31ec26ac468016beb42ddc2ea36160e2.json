{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\Projects\\\\recipe_app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"D:\\\\Projects\\\\recipe_app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Projects\\\\recipe_app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import styles from\"./styles.module.css\";import Header from\"../Header/Header\";// Adjust path if necessary\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Favorites=function Favorites(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),favorites=_useState2[0],setFavorites=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(JSON.parse(localStorage.getItem(\"user\")||\"{}\")),_useState8=_slicedToArray(_useState7,1),user=_useState8[0];useEffect(function(){var fetchFavorites=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(user._id){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.prev=2;_context.next=5;return axios.get(\"http://localhost:5000/api/favorites/\".concat(user._id));case 5:res=_context.sent;console.log(\"Favorites fetched:\",res.data);// Log the fetched data\nsetFavorites(res.data);_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](2);console.error(\"Error fetching favorites:\",_context.t0);setError(\"Could not load favorites.\");case 14:_context.prev=14;setLoading(false);return _context.finish(14);case 17:case\"end\":return _context.stop();}}},_callee,null,[[2,10,14,17]]);}));return function fetchFavorites(){return _ref.apply(this,arguments);};}();fetchFavorites();},[user]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(recipeId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(user._id){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.prev=2;_context2.next=5;return axios.delete(\"http://localhost:5000/api/favorites\",{data:{userId:user._id,recipeId:recipeId}});case 5:// Update the local state to remove the deleted recipe\nsetFavorites(favorites.filter(function(fav){return fav.idMeal!==recipeId;}));console.log(\"Favorite deleted successfully\");_context2.next=13;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);console.error(\"Error deleting favorite:\",_context2.t0);setError(\"Could not delete favorite.\");case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{children:error});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.favorites_container,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your Favorite Recipes\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.recipe_grid,children:favorites.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No favorites added yet.\"}):favorites.map(function(recipe){return/*#__PURE__*/_jsxs(\"div\",{className:styles.recipe_card,children:[/*#__PURE__*/_jsx(\"img\",{src:recipe.strMealThumb,alt:recipe.strMeal,className:styles.recipe_img}),/*#__PURE__*/_jsxs(\"div\",{className:styles.recipe_info,children:[/*#__PURE__*/_jsx(\"span\",{className:styles.recipe_name,children:recipe.strMeal}),/*#__PURE__*/_jsx(\"svg\",{onClick:function onClick(){return handleDelete(recipe.idMeal);}// Call delete function on click\n,xmlns:\"http://www.w3.org/2000/svg\",width:\"20\",height:\"20\",fill:favorites.some(function(fav){return fav.idMeal===recipe.idMeal;})?\"pink\":\"none\"// Fill for favorited\n,stroke:\"black\",className:styles.heart_icon,viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 15s-7-4.35-7-9.36C1 2.66 3.58 0 8 0c4.42 0 7 2.66 7 5.64C15 10.65 8 15 8 15z\",strokeWidth:\"2\"// Set stroke width for outline\n})})]})]},recipe.idMeal);})})]})]});};export default Favorites;","map":{"version":3,"sources":["D:/Projects/recipe_app/client/src/components/Favorites/favorites.jsx"],"names":["useState","useEffect","axios","styles","Header","Favorites","favorites","setFavorites","loading","setLoading","error","setError","JSON","parse","localStorage","getItem","user","fetchFavorites","_id","get","res","console","log","data","handleDelete","recipeId","delete","userId","filter","fav","idMeal","favorites_container","recipe_grid","length","map","recipe","recipe_card","strMealThumb","strMeal","recipe_img","recipe_info","recipe_name","some","heart_icon"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport styles from \"./styles.module.css\";\r\nimport Header from \"../Header/Header\"; // Adjust path if necessary\r\n\r\nconst Favorites = () => {\r\n    const [favorites, setFavorites] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [user] = useState(JSON.parse(localStorage.getItem(\"user\") || \"{}\"));\r\n\r\n    useEffect(() => {\r\n        const fetchFavorites = async () => {\r\n            if (!user._id) return; // No user logged in\r\n\r\n            try {\r\n                const res = await axios.get(`http://localhost:5000/api/favorites/${user._id}`);\r\n                console.log(\"Favorites fetched:\", res.data); // Log the fetched data\r\n                setFavorites(res.data);\r\n            } catch (err) {\r\n                console.error(\"Error fetching favorites:\", err);\r\n                setError(\"Could not load favorites.\");\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchFavorites();\r\n    }, [user]);\r\n\r\n    const handleDelete = async (recipeId) => {\r\n        if (!user._id) return; // No user logged in\r\n\r\n        try {\r\n            await axios.delete(\"http://localhost:5000/api/favorites\", {\r\n                data: { userId: user._id, recipeId },\r\n            });\r\n            // Update the local state to remove the deleted recipe\r\n            setFavorites(favorites.filter(fav => fav.idMeal !== recipeId));\r\n            console.log(\"Favorite deleted successfully\");\r\n        } catch (err) {\r\n            console.error(\"Error deleting favorite:\", err);\r\n            setError(\"Could not delete favorite.\");\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading...</p>;\r\n    if (error) return <p>{error}</p>;\r\n\r\n    return (\r\n        <>\r\n            <Header />\r\n            <div className={styles.favorites_container}>\r\n                <h1>Your Favorite Recipes</h1>\r\n                <div className={styles.recipe_grid}>\r\n                    {favorites.length === 0 ? (\r\n                        <p>No favorites added yet.</p>\r\n                    ) : (\r\n                        favorites.map((recipe) => (\r\n                            <div key={recipe.idMeal} className={styles.recipe_card}>\r\n                                <img\r\n                                    src={recipe.strMealThumb}\r\n                                    alt={recipe.strMeal}\r\n                                    className={styles.recipe_img}\r\n                                />\r\n                                <div className={styles.recipe_info}>\r\n                                    <span className={styles.recipe_name}>\r\n                                        {recipe.strMeal}\r\n                                    </span>\r\n                                    <svg\r\n                                        onClick={() => handleDelete(recipe.idMeal)} // Call delete function on click\r\n                                        xmlns=\"http://www.w3.org/2000/svg\"\r\n                                        width=\"20\"\r\n                                        height=\"20\"\r\n                                        fill={favorites.some(fav => fav.idMeal === recipe.idMeal) ? \"pink\" : \"none\"} // Fill for favorited\r\n                                        stroke=\"black\"\r\n                                        className={styles.heart_icon}\r\n                                        viewBox=\"0 0 16 16\"\r\n                                    >\r\n                                        <path\r\n                                            d=\"M8 15s-7-4.35-7-9.36C1 2.66 3.58 0 8 0c4.42 0 7 2.66 7 5.64C15 10.65 8 15 8 15z\"\r\n                                            strokeWidth=\"2\" // Set stroke width for outline\r\n                                        />\r\n                                    </svg>\r\n\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Favorites;\r\n"]},"metadata":{},"sourceType":"module"}