{"ast":null,"code":"import _asyncToGenerator from\"D:\\\\Projects\\\\recipe_app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"D:\\\\Projects\\\\recipe_app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\Projects\\\\recipe_app\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect}from\"react\";import axios from\"axios\";import styles from\"./styles.module.css\";import Header from\"../Header/Header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Main=function Main(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),categories=_useState2[0],setCategories=_useState2[1];var _useState3=useState(\"pork\"),_useState4=_slicedToArray(_useState3,2),selectedCategory=_useState4[0],setSelectedCategory=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),recipes=_useState6[0],setRecipes=_useState6[1];var _useState7=useState(new Set()),_useState8=_slicedToArray(_useState7,2),favoritedRecipes=_useState8[0],setFavoritedRecipes=_useState8[1];var _useState9=useState(JSON.parse(localStorage.getItem(\"user\")||\"{}\")),_useState10=_slicedToArray(_useState9,1),user=_useState10[0];// Fetch categories when the component mounts\nuseEffect(function(){var fetchCategories=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://www.themealdb.com/api/json/v1/1/categories.php\");case 3:res=_context.sent;setCategories(res.data.categories.slice(0,5));_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(\"Error fetching categories:\",_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchCategories(){return _ref.apply(this,arguments);};}();fetchCategories();},[]);// Fetch recipes based on the selected category\nuseEffect(function(){var fetchRecipes=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"https://www.themealdb.com/api/json/v1/1/filter.php?c=\".concat(selectedCategory));case 3:res=_context2.sent;setRecipes(res.data.meals);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(\"Error fetching recipes:\",_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function fetchRecipes(){return _ref2.apply(this,arguments);};}();if(selectedCategory)fetchRecipes();},[selectedCategory]);// Function to add a recipe to favorites\nvar handleAddToFavorites=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(recipe){var updatedFavorites;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(user._id){_context3.next=3;break;}alert(\"Please log in to add favorites.\");return _context3.abrupt(\"return\");case 3:_context3.prev=3;_context3.next=6;return axios.post(\"http://localhost:5000/api/favorites\",{userId:user._id,recipeId:recipe.idMeal});case 6:// Update local state and local storage for favorites\nupdatedFavorites=new Set(favoritedRecipes);if(updatedFavorites.has(recipe.idMeal)){updatedFavorites.delete(recipe.idMeal);// Remove from favorites\n}else{updatedFavorites.add(recipe.idMeal);// Add to favorites\n}setFavoritedRecipes(updatedFavorites);_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](3);console.error(\"Error adding to favorites:\",_context3.t0);case 14:case\"end\":return _context3.stop();}}},_callee3,null,[[3,11]]);}));return function handleAddToFavorites(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.main_container,children:[/*#__PURE__*/_jsx(\"div\",{className:styles.category_buttons,children:categories.map(function(category){return/*#__PURE__*/_jsx(\"button\",{className:selectedCategory===category.strCategory?styles.active_category:styles.category_btn,onClick:function onClick(){return setSelectedCategory(category.strCategory);},children:category.strCategory},category.idCategory);})}),/*#__PURE__*/_jsx(\"div\",{className:styles.recipe_grid,children:recipes.map(function(recipe){return/*#__PURE__*/_jsxs(\"div\",{className:styles.recipe_card,children:[/*#__PURE__*/_jsx(\"img\",{src:recipe.strMealThumb,alt:recipe.strMeal,className:styles.recipe_img}),/*#__PURE__*/_jsxs(\"span\",{children:[recipe.strMeal,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleAddToFavorites(recipe);},className:\"\".concat(styles.favorite_btn,\" \").concat(favoritedRecipes.has(recipe.idMeal)?styles.favorited:\"\"),children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",width:\"18\",height:\"18\",fill:favoritedRecipes.has(recipe.idMeal)?\"pink\":\"none\",stroke:favoritedRecipes.has(recipe.idMeal)?\"pink\":\"black\",className:\"bi bi-heart\",viewBox:\"0 0 16 16\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M8 15s-7-4.35-7-9.36C1 2.66 3.58 0 8 0c4.42 0 7 2.66 7 5.64C15 10.65 8 15 8 15z\",strokeWidth:\"2\"})})})]})]},recipe.idMeal);})})]})]});};export default Main;","map":{"version":3,"sources":["D:/Projects/recipe_app/client/src/components/Main/main.jsx"],"names":["useState","useEffect","axios","styles","Header","Main","categories","setCategories","selectedCategory","setSelectedCategory","recipes","setRecipes","Set","favoritedRecipes","setFavoritedRecipes","JSON","parse","localStorage","getItem","user","fetchCategories","get","res","data","slice","console","error","fetchRecipes","meals","handleAddToFavorites","recipe","_id","alert","post","userId","recipeId","idMeal","updatedFavorites","has","delete","add","main_container","category_buttons","map","category","strCategory","active_category","category_btn","idCategory","recipe_grid","recipe_card","strMealThumb","strMeal","recipe_img","favorite_btn","favorited"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport styles from \"./styles.module.css\";\r\nimport Header from \"../Header/Header\";\r\n\r\nconst Main = () => {\r\n\tconst [categories, setCategories] = useState([]);\r\n\tconst [selectedCategory, setSelectedCategory] = useState(\"pork\");\r\n\tconst [recipes, setRecipes] = useState([]);\r\n\tconst [favoritedRecipes, setFavoritedRecipes] = useState(new Set());\r\n\tconst [user] = useState(JSON.parse(localStorage.getItem(\"user\") || \"{}\"));\r\n\r\n\t// Fetch categories when the component mounts\r\n\tuseEffect(() => {\r\n\t\tconst fetchCategories = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\t\"https://www.themealdb.com/api/json/v1/1/categories.php\"\r\n\t\t\t\t);\r\n\t\t\t\tsetCategories(res.data.categories.slice(0, 5));\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error fetching categories:\", error);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tfetchCategories();\r\n\t}, []);\r\n\r\n\t// Fetch recipes based on the selected category\r\n\tuseEffect(() => {\r\n\t\tconst fetchRecipes = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await axios.get(\r\n\t\t\t\t\t`https://www.themealdb.com/api/json/v1/1/filter.php?c=${selectedCategory}`\r\n\t\t\t\t);\r\n\t\t\t\tsetRecipes(res.data.meals);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error fetching recipes:\", error);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tif (selectedCategory) fetchRecipes();\r\n\t}, [selectedCategory]);\r\n\r\n\t// Function to add a recipe to favorites\r\n\tconst handleAddToFavorites = async (recipe) => {\r\n\t\tif (!user._id) {\r\n\t\t\talert(\"Please log in to add favorites.\");\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\tawait axios.post(\"http://localhost:5000/api/favorites\", {\r\n\t\t\t\tuserId: user._id,\r\n\t\t\t\trecipeId: recipe.idMeal,\r\n\t\t\t});\r\n\r\n\t\t\t// Update local state and local storage for favorites\r\n\t\t\tconst updatedFavorites = new Set(favoritedRecipes);\r\n\t\t\tif (updatedFavorites.has(recipe.idMeal)) {\r\n\t\t\t\tupdatedFavorites.delete(recipe.idMeal); // Remove from favorites\r\n\t\t\t} else {\r\n\t\t\t\tupdatedFavorites.add(recipe.idMeal); // Add to favorites\r\n\t\t\t}\r\n\t\t\tsetFavoritedRecipes(updatedFavorites);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error adding to favorites:\", error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Header />\r\n\r\n\t\t\t<div className={styles.main_container}>\r\n\t\t\t\t<div className={styles.category_buttons}>\r\n\t\t\t\t\t{categories.map((category) => (\r\n\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\tkey={category.idCategory}\r\n\t\t\t\t\t\t\tclassName={\r\n\t\t\t\t\t\t\t\tselectedCategory === category.strCategory\r\n\t\t\t\t\t\t\t\t\t? styles.active_category\r\n\t\t\t\t\t\t\t\t\t: styles.category_btn\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tonClick={() => setSelectedCategory(category.strCategory)}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{category.strCategory}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={styles.recipe_grid}>\r\n\t\t\t\t\t{recipes.map((recipe) => (\r\n\t\t\t\t\t\t<div key={recipe.idMeal} className={styles.recipe_card}>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tsrc={recipe.strMealThumb}\r\n\t\t\t\t\t\t\t\talt={recipe.strMeal}\r\n\t\t\t\t\t\t\t\tclassName={styles.recipe_img}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t{recipe.strMeal}\r\n\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\tonClick={() => handleAddToFavorites(recipe)}\r\n\t\t\t\t\t\t\t\t\tclassName={`${styles.favorite_btn} ${\r\n\t\t\t\t\t\t\t\t\t\tfavoritedRecipes.has(recipe.idMeal) ? styles.favorited : \"\"\r\n\t\t\t\t\t\t\t\t\t}`}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{/* Heart Icon */}\r\n\t\t\t\t\t\t\t\t\t<svg\r\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\t\t\t\t\t\t\twidth=\"18\"\r\n\t\t\t\t\t\t\t\t\t\theight=\"18\"\r\n\t\t\t\t\t\t\t\t\t\tfill={favoritedRecipes.has(recipe.idMeal) ? \"pink\" : \"none\"}\r\n\t\t\t\t\t\t\t\t\t\tstroke={favoritedRecipes.has(recipe.idMeal) ? \"pink\" : \"black\"}\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"bi bi-heart\"\r\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 16 16\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<path\r\n\t\t\t\t\t\t\t\t\t\t\td=\"M8 15s-7-4.35-7-9.36C1 2.66 3.58 0 8 0c4.42 0 7 2.66 7 5.64C15 10.65 8 15 8 15z\"\r\n\t\t\t\t\t\t\t\t\t\t\tstrokeWidth=\"2\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Main;\r\n"]},"metadata":{},"sourceType":"module"}